<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; Iliad 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-argparse.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Iliad SNP Array Tutorial" href="../tutorial/tutorial.html" />
    <link rel="prev" title="ILIAD" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/ILIAD-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#step-1-install-snakemake-and-snakedeploy">Step 1: Install Snakemake and Snakedeploy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-install-singularity">Step 2: Install Singularity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-deploy-workflow">Step 3: Deploy workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-configure-workflow">Step 4: Configure Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-5-run-workflow">Step 5: Run workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/tutorial.html">Iliad SNP Array Tutorial</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Iliad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/getting_started/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<span id="getting-started-installation"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h1>
<p>Iliad is Snakemake workflow management system and can be cloned from the <a class="reference external" href="https://github.com/ncherric/Iliad">GitHub repository</a>.
It largely reduces the learning curve and dependency installation by taking advantage of pre-built execution environments for Iliad, but still requires the installation of the native package manager for the Snakemake application itself and Singularity.</p>
<section id="step-1-install-snakemake-and-snakedeploy">
<span id="conda-install"></span><h2>Step 1: Install Snakemake and Snakedeploy<a class="headerlink" href="#step-1-install-snakemake-and-snakedeploy" title="Permalink to this heading"></a></h2>
<p>Snakemake and Snakedeploy are best installed via the <a class="reference external" href="https://github.com/mamba-org/mamba">Mamba package manager</a> (a drop-in replacement for conda).
If you have neither Conda nor Mamba, it can be installed via <a class="reference external" href="https://github.com/conda-forge/miniforge#mambaforge">Mambaforge</a>. For other options see <a class="reference external" href="https://github.com/mamba-org/mamba">here</a>.</p>
<p>Given that Mamba is installed, run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mamba create -c conda-forge -c bioconda --name snakemake snakemake snakedeploy openpyxl
</pre></div>
</div>
<p>to install both Snakemake and Snakedeploy in an isolated environment.
For all following commands ensure that this environment is activated via</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda activate snakemake
</pre></div>
</div>
<p><strong>Estimated time: 15-20 minutes</strong></p>
</section>
<section id="step-2-install-singularity">
<h2>Step 2: Install Singularity<a class="headerlink" href="#step-2-install-singularity" title="Permalink to this heading"></a></h2>
<p>Follow the <a class="reference external" href="https://docs.sylabs.io/guides/3.6/user-guide/quick_start.html">instructions guide</a> provided by Singularity to install the program under the Operating System of your choosing.
If you are on an HPC server, it may have a Singularity module available to load already.</p>
<p>Make sure Singularity is in your PATH and accessible by Snakemake.</p>
<p><strong>Estimated time: 30-60 minutes</strong></p>
</section>
<section id="step-3-deploy-workflow">
<h2>Step 3: Deploy workflow<a class="headerlink" href="#step-3-deploy-workflow" title="Permalink to this heading"></a></h2>
<p>Given that Snakemake and Snakedeploy are installed and available (see Step 1), the workflow can be deployed as follows.</p>
<p>First, create an appropriate project working directory on your system and enter it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mkdir -p path/to/project-workdir
<span class="gp">$ </span><span class="nb">cd</span> path/to/project-workdir
</pre></div>
</div>
<p>In all following steps, we will assume that you are inside of that directory.</p>
<p>Git clone the <a class="reference external" href="https://github.com/ncherric/Iliad">GitHub repository</a>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git clone https://github.com/ncherric/Iliad.git
<span class="gp">$ </span><span class="nb">cd</span> path/to/project-workdir/Iliad
</pre></div>
</div>
<p>Two important folders found in the Iliad directory are <strong>workflow</strong> and <strong>config</strong>.
The former contains rules and scripts that a designated Snakefile in Iliad call on to run a specific module.
The latter contains configuration files which will be modified in the next step in order to configure the workflow to your needs.
Later, when executing the workflow, Snakemake will automatically find the main Snakefile in the workflow subfolder which is the <strong>Raw Sequence Read Data</strong> module.
However, there are other Snakefiles that are specific to the other Modules:</p>
<ul class="simple">
<li><p>Snakefile -&gt; Raw Sequence Read Data</p></li>
<li><p>cram_Snakefile -&gt; Stored Sequence Read Data</p></li>
<li><p>snpArray_Snakefile -&gt; SNP Array Data</p></li>
<li><p>LiftoverTo38_Snakefile -&gt; Submodule to liftover GRCh37 assembly VCF data to GRCh38 assembly</p></li>
<li><p>LiftoverTo37_Snakefile -&gt; Submodule to liftover GRCh38 assembly VCF data to GRCh37 assembly</p></li>
</ul>
<p>Consider to put this directory under version control, e.g. by managing it via a (private) Github repository.
Visit the Tutorial page for further info about each of the Modules in the bulleted list above.</p>
<p><strong>side note</strong>
( Once this pipeline is publicly available, and added to the Snakemake Workflow Catalog, run below. For now, just <strong>clone ABOVE</strong> )</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>snakedeploy deploy-workflow https://github.com/snakemake-workflows/Iliad . --tag v1.0.0
</pre></div>
</div>
</section>
<section id="step-4-configure-workflow">
<h2>Step 4: Configure Workflow<a class="headerlink" href="#step-4-configure-workflow" title="Permalink to this heading"></a></h2>
<p>To configure this workflow, modify config/config.yaml according to your needs, following the explanations provided in the file.</p>
</section>
<section id="step-5-run-workflow">
<h2>Step 5: Run workflow<a class="headerlink" href="#step-5-run-workflow" title="Permalink to this heading"></a></h2>
<p>Given that the workflow has been properly deployed and configured, it can be executed as follows.</p>
<p>For running the workflow while deploying any necessary software via singularity and conda (using the Mamba package manager by default), run Snakemake with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>snakemake -p --use-singularity --use-conda --cores <span class="m">1</span> --jobs <span class="m">1</span> --snakefile workflow/snpArray_Snakefile --default-resource<span class="o">=</span><span class="nv">mem_mb</span><span class="o">=</span><span class="m">10000</span> --latency-wait <span class="m">120</span>
</pre></div>
</div>
<p>Snakemake will automatically detect the main Snakefile in the workflow subfolder and execute the workflow module that has been defined by the deployment in step 2.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="ILIAD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tutorial/tutorial.html" class="btn btn-neutral float-right" title="Iliad SNP Array Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2022, Noah Herrick.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>